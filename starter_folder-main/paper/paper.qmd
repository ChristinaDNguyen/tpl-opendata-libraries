---
title: "Top 10 cumulative annual number of visits to Toronto Public Library Branches"
subtitle: ": from 2012 to 2022"
author: 
  - Christina Nguyen
thanks: "This code and data are available at: https://github.com/ChristinaDNguyen/tpl-opendata-libraries."
date: today
date-format: long
abstract: "This paper analyzes the dataset of 100 Toronto Public Library (TPL) branches, identifies the top 10 most visited Toronto Public Library branches over the time period 2012 to 2022,  and the number of visits they had each year, from 2012 to 2022. Overall, on average, the top 10 branches all recorded a decreasing amount of engagement over this time period. This data supports library administration in allocating funding resources, allocating staffing resources, and planning outreach/community programs."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(here)


top_data <- read_csv(here::here("data/analysis_data/top_data.csv"))

```


# Introduction 

The Toronto Public Library (TPL) system has 100 branches, which serve as vital hubs for community engagement, information access, and public services. Given the size of this library system and its role in supporting the diverse needs of Toronto's population, understanding how patrons use these branches is crucial for effective resource allocation, program development, and long-term planning. However, while the annual collection of visit data offers a wealth of information, there remains a significant gap in understanding why certain branches experience more or less traffic, and how external factors such as demographic shifts, neighborhood developments, and public transportation access may influence branch visits. Filling this gap provides a deeper, comprehensive view of how library services can adapt to meet the evolving needs of Toronto’s communities.

Each branch collected data about how many visits they received annually, from 2012 to 2022. This data helps TPL better service patrons, by understanding which branches
get more or less traffic and which trends may emerge over time (for example, over
one decade). R was used to process and present the data (@R). 

See the [data section below](#sec-data) for the graph of this data, which displays
the annual number of visits to each branch, for the top 10 branches (meaning, the branches which had the greatest culumative visits in that decade). Each branch is represented by a differently coloured line. The x-axis displays the year; the y-axis displays the number of 
visits for that year. Analysis of the data follows to understand the decreasing
number of visits over time, even for the top 10 visited libraries in that decade. Plus, given this data, implications for library administration are explored.


# Data {#sec-data}

Our data comes from Open Data Toronto (@OpenDataToronto). The data measures
the number of visits to each branch per year. In processing the data,
 the total number of visits each branch had over the 10 years was calculated. Then
 the data was isolated, to visualize only the top 10 most visited branches in that 
decade (Figure 1).

(@fig-bills)

```{r}
#| label: fig-bills
#| fig-cap: Yearly visits of the top 10 TPL branches, from 2012 − 2022
#| echo: false

ggplot(top_data,
       aes(
         x = Year,
         y = NumberofVisits,
         color = BranchName,
         group = BranchName
       )) +
  geom_line(linewidth = 1) +
  geom_point(size = 2) +
  labs(
    title = "Yearly visits of the top 10 TPL branches, 2012 - 2022",
    x = "Year",
    y = "Number of annual visits",
    color = "Branch"
  ) +
  scale_y_continuous(labels = scales::comma) +
  scale_x_continuous(breaks = seq(2012, 2022, by = 2)) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


# Discussion


It is more useful to look at the top 10 most visited branches rather than 
the numbers from all 100 branches, particularly from an administrative
point of view. This data helps administrators allocate resources more effectively
within branches that have roughly the same amount of demand to each other.
This can inform decisions about staffing, funding, and programming, 
ensuring that popular branches are adequately supported to meet demand. Plus, this 
can guide future planning, such as expanding services or introducing new 
programs tailored to the needs of the most active patrons.

The branch CL, for example, shows a decreased number of visitors from 1,493,796 in 2012, with a sharp downward spike in 2017, to 827,795 in 2022, suggesting a significant decrease in engagement or resources. This may indicate potential challenges such as shifts in community demographics, changes in service offerings, or increased competition from digital resources. 

Furthermore, all of the top 10 branches have seen, from 2012 - 2022, either 
an overall decrease or maintained number of visits over time. Notable sharp
decreases include CL and TRL. TRL in particular has lost over half a million
visits when comparing 2022 to 2012. This can be indicative of several underlying issues affecting patron engagement and library utilization. For instance, it may suggest a decline in community interest in library services or a shift in the way patrons access information, potentially favoring digital resources over traditional in-person visits. Additionally, the substantial drop in visits at TRL could reflect changes in the branch's operational hours, staffing levels, or the availability of popular programs and resources that once attracted a large number of visitors. To fully understand these observed patterns, it would be useful to analyze community feedback (through targeted surveys), (@Metrics) evaluate the effectiveness of current services (using metrics like program attendance rates, customer satisfaction surveys, and feedback forms), and consider the impact of external factors such as economic conditions or changes in local Toronto population dynamics.

## Weaknesses and next steps

Future analyses comparing the top 10 most visited branches with the bottom 10 least visited could provide valuable insights. While higher visit numbers might reflect factors like location or broader community reach, lower-visited branches may still be successful in meeting the specific needs of their local communities. By examining both high- and low-traffic branches, we can explore whether different strategies are being employed effectively, or if improvements can be made. This balanced approach would support more tailored interventions, ensuring that each branch, regardless of visit numbers, continues to serve its community in meaningful ways.

\newpage


# References are put into a seperate file called references.bib, and called up
# here in this Quarto paper using the @referencename.

# You can reformat code by selecting all the code and clicking CTRL+SHIFT+A
# Render the PDF from this Quarto by clicking "Render" on the top of the code
# window.

